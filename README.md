# MCEA Reference App

This project showcases a reference implementation for Mastercard EzAccess API (MCEA). 
The full API documentation can be found at [Mastercard Developer Portal](https://developer.mastercard.com/drafts/mastercard-ezaccess-for-issuers/staging/documentation/).

## Table of Contents

- [Monorepos](#monorepos)
- [Quick Start](#quick-start)
- [Notes](#notes)

## Monorepos

This project is an NPM workspace containing 3 monorepos:

- `api-client`: NodeJS API client auto generated by [OpenAPI Generator](https://openapi-generator.tech/) from the swagger file for MCEA API from Mastercard Developer Zone.
- `reference-app-backend`: ExpressJS server implementation for API consumable by `reference-app`, configured with Mastercard Client Authentication and utilizing OpenAPI `api-client`.
- `reference-app`: Angular frontend app talking to `reference-app-backend`.

## Quick Start

### Configure MCAPI Key

Copy your MCAPI *.p12 file to some local directory (or in `reference-app-backend` folder), and modify the .env file:

```
MCAPI_P12_PATH=[Your path to MCAPI p12 file related to reference-app-backend]
MCAPI_CONSUMER_KEY=[Your MCAPI consumer key]
MCAPI_KEYSTORE_PASSWORD=[Your MCAPI keystore password]
MCAPI_KEY_ALIAS=[Your MCAPI key alias]
```

### Install Dependencies

In Terminal, cd to your `mcea-reference-app` folder and run `npm i`.

Because this is an NPM workspace, the minimum required version for NPM is 7. 
If your NPM version is lower, try cd into each of 3 monorepos and run `npm i` separately.

As this project uses Angular 13.2.3, it requires Node version `^12.20.0 || ^14.15.0 || ^16.10.0`.

### Run Project

In Terminal, cd to your `mcea-reference-app` folder and run `npm start`. By default, the frontend will run on `http://localhost:4200` and the backend will run on `http://localhost:4201`.

### Frontend Features

In the frontend, you can:

- Generate a list of possible EAIDs.
- Using the generated EAIDs to enroll new EzAccess card entities by uploading CSV or manual entry.
- List all card entities of the issuers or per assigned program.
- Block/unblock a card.
- Replace card EAID.
- Assign/unassign program to/from a card.
- Get programs assigned to the issuer.

## Notes

### OpenAPI Client

The monorepo `api-client` contains MCAPI client auto generated from swagger file.

When there is API change you may want to regenerate the client as per [Mastercard documentation](https://developer.mastercard.com/platform/documentation/security-and-authentication/generating-and-configuring-a-mastercard-api-client/),
refering to step 2 and 3 (remember to choose NodeJS option).

## Author <a name="author"></a>

ezaccess_support@mastercard.com

## Support <a name="support"></a>
If you would like further information, please send an email to apisupport@mastercard.com

## License <a name="license"></a>
Copyright 2022 Mastercard
 
Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
 
       http://www.apache.org/licenses/LICENSE-2.0
 
Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
