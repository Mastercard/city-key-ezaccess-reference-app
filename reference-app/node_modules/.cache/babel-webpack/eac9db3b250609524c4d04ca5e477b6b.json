{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { ofType } from '@ngrx/effects';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { PROGRAM_ID } from 'app/shared/constants';\nimport { AssignProgram, CardsActionTypes, UnassignProgram } from '../../ngrx/cards.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@ngrx/effects\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/material/progress-spinner\";\n\nfunction CardsAssignUnassignProgramDialogComponent_mat_spinner_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 9);\n  }\n}\n\nlet CardsAssignUnassignProgramDialogComponent = class CardsAssignUnassignProgramDialogComponent {\n  constructor(data, _dialogRef, _formBuilder, _store, _actions) {\n    this.data = data;\n    this._dialogRef = _dialogRef;\n    this._formBuilder = _formBuilder;\n    this._store = _store;\n    this._actions = _actions;\n  }\n\n  get actionName() {\n    return this.data.assign ? 'Assign' : 'Unassign';\n  }\n\n  get programId() {\n    return this.form.get('programId');\n  }\n\n  ngOnInit() {\n    this._createForm();\n\n    this._initObservables();\n\n    this._checkSuccessToCloseDialog();\n  }\n\n  onSubmit() {\n    if (this.data.assign) {\n      this._store.dispatch(new AssignProgram(this.programId.value, {\n        eaid: this.data.card.eaid\n      }));\n    } else {\n      this._store.dispatch(new UnassignProgram(this.programId.value, this.data.card.eaid));\n    }\n  }\n\n  _createForm() {\n    this.form = this._formBuilder.group({\n      programId: [PROGRAM_ID]\n    });\n  }\n\n  _initObservables() {\n    this.isProcessing$ = this._store.select(s => s.cards[this.data.assign ? 'assignProgram' : 'unassignProgram'].isProcessing).pipe(untilDestroyed(this));\n    this.isProcessing$.pipe(untilDestroyed(this)).subscribe(isProcessing => {\n      if (isProcessing) {\n        this.form.disable();\n      } else {\n        this.form.enable();\n      }\n    });\n  }\n\n  _checkSuccessToCloseDialog() {\n    this._actions.pipe(ofType(CardsActionTypes.AssignProgramSuccess, CardsActionTypes.UnassignProgramSuccess), untilDestroyed(this)).subscribe(() => this._dialogRef.close());\n  }\n\n};\n\nCardsAssignUnassignProgramDialogComponent.ɵfac = function CardsAssignUnassignProgramDialogComponent_Factory(t) {\n  return new (t || CardsAssignUnassignProgramDialogComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i4.Actions));\n};\n\nCardsAssignUnassignProgramDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CardsAssignUnassignProgramDialogComponent,\n  selectors: [[\"assign-unassign-program-dialog\"]],\n  decls: 22,\n  vars: 13,\n  consts: [[1, \"mat-dialog-title-bar\"], [\"mat-dialog-title\", \"\"], [\"mat-icon-button\", \"\", \"mat-dialog-close\", \"\", \"aria-label\", \"close dialog\"], [\"novalidate\", \"\", 1, \"cards-assign-unassign-program-dialog-form\", 3, \"formGroup\", \"ngSubmit\"], [\"appearance\", \"outline\", 1, \"cards-assign-unassign-program-dialog-form-programId\"], [\"matInput\", \"\", \"type\", \"text\", \"readonly\", \"\", 3, \"formControl\"], [\"mat-flat-button\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"cards-assign-unassign-program-dialog-submit-btn\", 3, \"disabled\", \"click\"], [\"diameter\", \"16\", 4, \"ngIf\"], [\"mat-stroked-button\", \"\", \"mat-dialog-close\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"cards-assign-unassign-program-dialog-cancel-btn\", 3, \"disabled\"], [\"diameter\", \"16\"]],\n  template: function CardsAssignUnassignProgramDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"h1\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 2);\n      i0.ɵɵelementStart(4, \"mat-icon\");\n      i0.ɵɵtext(5, \"close\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"mat-dialog-content\");\n      i0.ɵɵelementStart(7, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function CardsAssignUnassignProgramDialogComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(8, \"mat-form-field\", 4);\n      i0.ɵɵelementStart(9, \"mat-label\");\n      i0.ɵɵtext(10, \"Program ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"mat-dialog-actions\");\n      i0.ɵɵelementStart(13, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function CardsAssignUnassignProgramDialogComponent_Template_button_click_13_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵpipe(14, \"async\");\n      i0.ɵɵtemplate(15, CardsAssignUnassignProgramDialogComponent_mat_spinner_15_Template, 1, 0, \"mat-spinner\", 7);\n      i0.ɵɵpipe(16, \"async\");\n      i0.ɵɵelementStart(17, \"span\");\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 8);\n      i0.ɵɵpipe(20, \"async\");\n      i0.ɵɵtext(21, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.actionName, \" Program\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.programId);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", i0.ɵɵpipeBind1(14, 7, ctx.isProcessing$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(16, 9, ctx.isProcessing$));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.actionName);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", i0.ɵɵpipeBind1(20, 11, ctx.isProcessing$));\n    }\n  },\n  directives: [i1.MatDialogTitle, i5.MatButton, i1.MatDialogClose, i6.MatIcon, i1.MatDialogContent, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i7.MatFormField, i7.MatLabel, i8.MatInput, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i1.MatDialogActions, i9.NgIf, i10.MatSpinner],\n  pipes: [i9.AsyncPipe],\n  encapsulation: 2\n});\nCardsAssignUnassignProgramDialogComponent = __decorate([UntilDestroy()], CardsAssignUnassignProgramDialogComponent);\nexport { CardsAssignUnassignProgramDialogComponent };","map":{"version":3,"sources":["/Users/rasika/WORK/DEV/PROJECTS/MCEA/mcea-01/mcea-reference-app/reference-app/src/app/features/cards/components/assign-unassign-program-dialog/assign-unassign-program-dialog.component.ts"],"names":["__decorate","MAT_DIALOG_DATA","ofType","UntilDestroy","untilDestroyed","PROGRAM_ID","AssignProgram","CardsActionTypes","UnassignProgram","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","CardsAssignUnassignProgramDialogComponent_mat_spinner_15_Template","rf","ctx","ɵɵelement","CardsAssignUnassignProgramDialogComponent","constructor","data","_dialogRef","_formBuilder","_store","_actions","actionName","assign","programId","form","get","ngOnInit","_createForm","_initObservables","_checkSuccessToCloseDialog","onSubmit","dispatch","value","eaid","card","group","isProcessing$","select","s","cards","isProcessing","pipe","subscribe","disable","enable","AssignProgramSuccess","UnassignProgramSuccess","close","ɵfac","CardsAssignUnassignProgramDialogComponent_Factory","t","ɵɵdirectiveInject","MatDialogRef","FormBuilder","Store","Actions","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CardsAssignUnassignProgramDialogComponent_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","CardsAssignUnassignProgramDialogComponent_Template_form_ngSubmit_7_listener","CardsAssignUnassignProgramDialogComponent_Template_button_click_13_listener","ɵɵpipe","ɵɵtemplate","ɵɵadvance","ɵɵtextInterpolate1","ɵɵproperty","ɵɵpipeBind1","ɵɵtextInterpolate","directives","MatDialogTitle","MatButton","MatDialogClose","MatIcon","MatDialogContent","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatFormField","MatLabel","MatInput","DefaultValueAccessor","NgControlStatus","FormControlDirective","MatDialogActions","NgIf","MatSpinner","pipes","AsyncPipe","encapsulation"],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,uBAA7C;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,SAASC,aAAT,EAAwBC,gBAAxB,EAA0CC,eAA1C,QAAiE,0BAAjE;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,aAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,8BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,yBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,GAAZ,MAAqB,oCAArB;;AACA,SAASC,iEAAT,CAA2EC,EAA3E,EAA+EC,GAA/E,EAAoF;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC9FZ,IAAAA,EAAE,CAACc,SAAH,CAAa,CAAb,EAAgB,aAAhB,EAA+B,CAA/B;AACH;AAAE;;AACH,IAAIC,yCAAyC,GAAG,MAAMA,yCAAN,CAAgD;AAC5FC,EAAAA,WAAW,CAACC,IAAD,EAAOC,UAAP,EAAmBC,YAAnB,EAAiCC,MAAjC,EAAyCC,QAAzC,EAAmD;AAC1D,SAAKJ,IAAL,GAAYA,IAAZ;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACH;;AACa,MAAVC,UAAU,GAAG;AAAE,WAAO,KAAKL,IAAL,CAAUM,MAAV,GAAmB,QAAnB,GAA8B,UAArC;AAAkD;;AACxD,MAATC,SAAS,GAAG;AAAE,WAAO,KAAKC,IAAL,CAAUC,GAAV,CAAc,WAAd,CAAP;AAAoC;;AACtDC,EAAAA,QAAQ,GAAG;AACP,SAAKC,WAAL;;AACA,SAAKC,gBAAL;;AACA,SAAKC,0BAAL;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKd,IAAL,CAAUM,MAAd,EAAsB;AAClB,WAAKH,MAAL,CAAYY,QAAZ,CAAqB,IAAInC,aAAJ,CAAkB,KAAK2B,SAAL,CAAeS,KAAjC,EAAwC;AAAEC,QAAAA,IAAI,EAAE,KAAKjB,IAAL,CAAUkB,IAAV,CAAeD;AAAvB,OAAxC,CAArB;AACH,KAFD,MAGK;AACD,WAAKd,MAAL,CAAYY,QAAZ,CAAqB,IAAIjC,eAAJ,CAAoB,KAAKyB,SAAL,CAAeS,KAAnC,EAA0C,KAAKhB,IAAL,CAAUkB,IAAV,CAAeD,IAAzD,CAArB;AACH;AACJ;;AACDN,EAAAA,WAAW,GAAG;AACV,SAAKH,IAAL,GAAY,KAAKN,YAAL,CAAkBiB,KAAlB,CAAwB;AAChCZ,MAAAA,SAAS,EAAE,CAAC5B,UAAD;AADqB,KAAxB,CAAZ;AAGH;;AACDiC,EAAAA,gBAAgB,GAAG;AACf,SAAKQ,aAAL,GAAqB,KAAKjB,MAAL,CAChBkB,MADgB,CACTC,CAAC,IAAIA,CAAC,CAACC,KAAF,CAAQ,KAAKvB,IAAL,CAAUM,MAAV,GAAmB,eAAnB,GAAqC,iBAA7C,EAAgEkB,YAD5D,EAEhBC,IAFgB,CAEX/C,cAAc,CAAC,IAAD,CAFH,CAArB;AAGA,SAAK0C,aAAL,CACKK,IADL,CACU/C,cAAc,CAAC,IAAD,CADxB,EAEKgD,SAFL,CAEeF,YAAY,IAAI;AAC3B,UAAIA,YAAJ,EAAkB;AACd,aAAKhB,IAAL,CAAUmB,OAAV;AACH,OAFD,MAGK;AACD,aAAKnB,IAAL,CAAUoB,MAAV;AACH;AACJ,KATD;AAUH;;AACDf,EAAAA,0BAA0B,GAAG;AACzB,SAAKT,QAAL,CAAcqB,IAAd,CAAmBjD,MAAM,CAACK,gBAAgB,CAACgD,oBAAlB,EAAwChD,gBAAgB,CAACiD,sBAAzD,CAAzB,EAA2GpD,cAAc,CAAC,IAAD,CAAzH,EAAiIgD,SAAjI,CAA2I,MAAM,KAAKzB,UAAL,CAAgB8B,KAAhB,EAAjJ;AACH;;AA7C2F,CAAhG;;AA+CAjC,yCAAyC,CAACkC,IAA1C,GAAiD,SAASC,iDAAT,CAA2DC,CAA3D,EAA8D;AAAE,SAAO,KAAKA,CAAC,IAAIpC,yCAAV,EAAqDf,EAAE,CAACoD,iBAAH,CAAqB5D,eAArB,CAArD,EAA4FQ,EAAE,CAACoD,iBAAH,CAAqBnD,EAAE,CAACoD,YAAxB,CAA5F,EAAmIrD,EAAE,CAACoD,iBAAH,CAAqBlD,EAAE,CAACoD,WAAxB,CAAnI,EAAyKtD,EAAE,CAACoD,iBAAH,CAAqBjD,EAAE,CAACoD,KAAxB,CAAzK,EAAyMvD,EAAE,CAACoD,iBAAH,CAAqBhD,EAAE,CAACoD,OAAxB,CAAzM,CAAP;AAAoP,CAArW;;AACAzC,yCAAyC,CAAC0C,IAA1C,GAAiD,aAAczD,EAAE,CAAC0D,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE5C,yCAAR;AAAmD6C,EAAAA,SAAS,EAAE,CAAC,CAAC,gCAAD,CAAD,CAA9D;AAAoGC,EAAAA,KAAK,EAAE,EAA3G;AAA+GC,EAAAA,IAAI,EAAE,EAArH;AAAyHC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,sBAAJ,CAAD,EAA8B,CAAC,kBAAD,EAAqB,EAArB,CAA9B,EAAwD,CAAC,iBAAD,EAAoB,EAApB,EAAwB,kBAAxB,EAA4C,EAA5C,EAAgD,YAAhD,EAA8D,cAA9D,CAAxD,EAAuI,CAAC,YAAD,EAAe,EAAf,EAAmB,CAAnB,EAAsB,2CAAtB,EAAmE,CAAnE,EAAsE,WAAtE,EAAmF,UAAnF,CAAvI,EAAuO,CAAC,YAAD,EAAe,SAAf,EAA0B,CAA1B,EAA6B,qDAA7B,CAAvO,EAA4T,CAAC,UAAD,EAAa,EAAb,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,UAAjC,EAA6C,EAA7C,EAAiD,CAAjD,EAAoD,aAApD,CAA5T,EAAgY,CAAC,iBAAD,EAAoB,EAApB,EAAwB,MAAxB,EAAgC,QAAhC,EAA0C,OAA1C,EAAmD,SAAnD,EAA8D,CAA9D,EAAiE,iDAAjE,EAAoH,CAApH,EAAuH,UAAvH,EAAmI,OAAnI,CAAhY,EAA6gB,CAAC,UAAD,EAAa,IAAb,EAAmB,CAAnB,EAAsB,MAAtB,CAA7gB,EAA4iB,CAAC,oBAAD,EAAuB,EAAvB,EAA2B,kBAA3B,EAA+C,EAA/C,EAAmD,MAAnD,EAA2D,QAA3D,EAAqE,OAArE,EAA8E,SAA9E,EAAyF,CAAzF,EAA4F,iDAA5F,EAA+I,CAA/I,EAAkJ,UAAlJ,CAA5iB,EAA2sB,CAAC,UAAD,EAAa,IAAb,CAA3sB,CAAjI;AAAi2BC,EAAAA,QAAQ,EAAE,SAASC,kDAAT,CAA4DrD,EAA5D,EAAgEC,GAAhE,EAAqE;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC1gCZ,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAlE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAA3B;AACAlE,MAAAA,EAAE,CAACmE,MAAH,CAAU,CAAV;AACAnE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,CAA/B;AACAlE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,UAArB;AACAlE,MAAAA,EAAE,CAACmE,MAAH,CAAU,CAAV,EAAa,OAAb;AACAnE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,oBAArB;AACAlE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,MAArB,EAA6B,CAA7B;AACAlE,MAAAA,EAAE,CAACqE,UAAH,CAAc,UAAd,EAA0B,SAASC,2EAAT,GAAuF;AAAE,eAAOzD,GAAG,CAACkB,QAAJ,EAAP;AAAwB,OAA3I;AACA/B,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,gBAArB,EAAuC,CAAvC;AACAlE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,CAAlB,EAAqB,WAArB;AACAlE,MAAAA,EAAE,CAACmE,MAAH,CAAU,EAAV,EAAc,YAAd;AACAnE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACc,SAAH,CAAa,EAAb,EAAiB,OAAjB,EAA0B,CAA1B;AACAd,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,EAAlB,EAAsB,oBAAtB;AACAlE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,CAAhC;AACAlE,MAAAA,EAAE,CAACqE,UAAH,CAAc,OAAd,EAAuB,SAASE,2EAAT,GAAuF;AAAE,eAAO1D,GAAG,CAACkB,QAAJ,EAAP;AAAwB,OAAxI;AACA/B,MAAAA,EAAE,CAACwE,MAAH,CAAU,EAAV,EAAc,OAAd;AACAxE,MAAAA,EAAE,CAACyE,UAAH,CAAc,EAAd,EAAkB9D,iEAAlB,EAAqF,CAArF,EAAwF,CAAxF,EAA2F,aAA3F,EAA0G,CAA1G;AACAX,MAAAA,EAAE,CAACwE,MAAH,CAAU,EAAV,EAAc,OAAd;AACAxE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,EAAlB,EAAsB,MAAtB;AACAlE,MAAAA,EAAE,CAACmE,MAAH,CAAU,EAAV;AACAnE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACkE,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,CAAhC;AACAlE,MAAAA,EAAE,CAACwE,MAAH,CAAU,EAAV,EAAc,OAAd;AACAxE,MAAAA,EAAE,CAACmE,MAAH,CAAU,EAAV,EAAc,UAAd;AACAnE,MAAAA,EAAE,CAACoE,YAAH;AACApE,MAAAA,EAAE,CAACoE,YAAH;AACH;;AAAC,QAAIxD,EAAE,GAAG,CAAT,EAAY;AACVZ,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC2E,kBAAH,CAAsB,EAAtB,EAA0B9D,GAAG,CAACS,UAA9B,EAA0C,UAA1C;AACAtB,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC4E,UAAH,CAAc,WAAd,EAA2B/D,GAAG,CAACY,IAA/B;AACAzB,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC4E,UAAH,CAAc,aAAd,EAA6B/D,GAAG,CAACW,SAAjC;AACAxB,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC4E,UAAH,CAAc,UAAd,EAA0B5E,EAAE,CAAC6E,WAAH,CAAe,EAAf,EAAmB,CAAnB,EAAsBhE,GAAG,CAACwB,aAA1B,CAA1B;AACArC,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC4E,UAAH,CAAc,MAAd,EAAsB5E,EAAE,CAAC6E,WAAH,CAAe,EAAf,EAAmB,CAAnB,EAAsBhE,GAAG,CAACwB,aAA1B,CAAtB;AACArC,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC8E,iBAAH,CAAqBjE,GAAG,CAACS,UAAzB;AACAtB,MAAAA,EAAE,CAAC0E,SAAH,CAAa,CAAb;AACA1E,MAAAA,EAAE,CAAC4E,UAAH,CAAc,UAAd,EAA0B5E,EAAE,CAAC6E,WAAH,CAAe,EAAf,EAAmB,EAAnB,EAAuBhE,GAAG,CAACwB,aAA3B,CAA1B;AACH;AAAE,GApD6E;AAoD3E0C,EAAAA,UAAU,EAAE,CAAC9E,EAAE,CAAC+E,cAAJ,EAAoB3E,EAAE,CAAC4E,SAAvB,EAAkChF,EAAE,CAACiF,cAArC,EAAqD5E,EAAE,CAAC6E,OAAxD,EAAiElF,EAAE,CAACmF,gBAApE,EAAsFlF,EAAE,CAACmF,aAAzF,EAAwGnF,EAAE,CAACoF,oBAA3G,EAAiIpF,EAAE,CAACqF,kBAApI,EAAwJhF,EAAE,CAACiF,YAA3J,EAAyKjF,EAAE,CAACkF,QAA5K,EAAsLjF,EAAE,CAACkF,QAAzL,EAAmMxF,EAAE,CAACyF,oBAAtM,EAA4NzF,EAAE,CAAC0F,eAA/N,EAAgP1F,EAAE,CAAC2F,oBAAnP,EAAyQ5F,EAAE,CAAC6F,gBAA5Q,EAA8RrF,EAAE,CAACsF,IAAjS,EAAuSrF,GAAG,CAACsF,UAA3S,CApD+D;AAoDyPC,EAAAA,KAAK,EAAE,CAACxF,EAAE,CAACyF,SAAJ,CApDhQ;AAoDgRC,EAAAA,aAAa,EAAE;AApD/R,CAArB,CAA/D;AAqDApF,yCAAyC,GAAGxB,UAAU,CAAC,CACnDG,YAAY,EADuC,CAAD,EAEnDqB,yCAFmD,CAAtD;AAGA,SAASA,yCAAT","sourcesContent":["import { __decorate } from \"tslib\";\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { ofType } from '@ngrx/effects';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { PROGRAM_ID } from 'app/shared/constants';\nimport { AssignProgram, CardsActionTypes, UnassignProgram } from '../../ngrx/cards.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@ngrx/effects\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/material/progress-spinner\";\nfunction CardsAssignUnassignProgramDialogComponent_mat_spinner_15_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 9);\n} }\nlet CardsAssignUnassignProgramDialogComponent = class CardsAssignUnassignProgramDialogComponent {\n    constructor(data, _dialogRef, _formBuilder, _store, _actions) {\n        this.data = data;\n        this._dialogRef = _dialogRef;\n        this._formBuilder = _formBuilder;\n        this._store = _store;\n        this._actions = _actions;\n    }\n    get actionName() { return this.data.assign ? 'Assign' : 'Unassign'; }\n    get programId() { return this.form.get('programId'); }\n    ngOnInit() {\n        this._createForm();\n        this._initObservables();\n        this._checkSuccessToCloseDialog();\n    }\n    onSubmit() {\n        if (this.data.assign) {\n            this._store.dispatch(new AssignProgram(this.programId.value, { eaid: this.data.card.eaid }));\n        }\n        else {\n            this._store.dispatch(new UnassignProgram(this.programId.value, this.data.card.eaid));\n        }\n    }\n    _createForm() {\n        this.form = this._formBuilder.group({\n            programId: [PROGRAM_ID]\n        });\n    }\n    _initObservables() {\n        this.isProcessing$ = this._store\n            .select(s => s.cards[this.data.assign ? 'assignProgram' : 'unassignProgram'].isProcessing)\n            .pipe(untilDestroyed(this));\n        this.isProcessing$\n            .pipe(untilDestroyed(this))\n            .subscribe(isProcessing => {\n            if (isProcessing) {\n                this.form.disable();\n            }\n            else {\n                this.form.enable();\n            }\n        });\n    }\n    _checkSuccessToCloseDialog() {\n        this._actions.pipe(ofType(CardsActionTypes.AssignProgramSuccess, CardsActionTypes.UnassignProgramSuccess), untilDestroyed(this)).subscribe(() => this._dialogRef.close());\n    }\n};\nCardsAssignUnassignProgramDialogComponent.ɵfac = function CardsAssignUnassignProgramDialogComponent_Factory(t) { return new (t || CardsAssignUnassignProgramDialogComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i4.Actions)); };\nCardsAssignUnassignProgramDialogComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CardsAssignUnassignProgramDialogComponent, selectors: [[\"assign-unassign-program-dialog\"]], decls: 22, vars: 13, consts: [[1, \"mat-dialog-title-bar\"], [\"mat-dialog-title\", \"\"], [\"mat-icon-button\", \"\", \"mat-dialog-close\", \"\", \"aria-label\", \"close dialog\"], [\"novalidate\", \"\", 1, \"cards-assign-unassign-program-dialog-form\", 3, \"formGroup\", \"ngSubmit\"], [\"appearance\", \"outline\", 1, \"cards-assign-unassign-program-dialog-form-programId\"], [\"matInput\", \"\", \"type\", \"text\", \"readonly\", \"\", 3, \"formControl\"], [\"mat-flat-button\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"cards-assign-unassign-program-dialog-submit-btn\", 3, \"disabled\", \"click\"], [\"diameter\", \"16\", 4, \"ngIf\"], [\"mat-stroked-button\", \"\", \"mat-dialog-close\", \"\", \"type\", \"button\", \"color\", \"primary\", 1, \"cards-assign-unassign-program-dialog-cancel-btn\", 3, \"disabled\"], [\"diameter\", \"16\"]], template: function CardsAssignUnassignProgramDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"button\", 2);\n        i0.ɵɵelementStart(4, \"mat-icon\");\n        i0.ɵɵtext(5, \"close\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-dialog-content\");\n        i0.ɵɵelementStart(7, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function CardsAssignUnassignProgramDialogComponent_Template_form_ngSubmit_7_listener() { return ctx.onSubmit(); });\n        i0.ɵɵelementStart(8, \"mat-form-field\", 4);\n        i0.ɵɵelementStart(9, \"mat-label\");\n        i0.ɵɵtext(10, \"Program ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-dialog-actions\");\n        i0.ɵɵelementStart(13, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function CardsAssignUnassignProgramDialogComponent_Template_button_click_13_listener() { return ctx.onSubmit(); });\n        i0.ɵɵpipe(14, \"async\");\n        i0.ɵɵtemplate(15, CardsAssignUnassignProgramDialogComponent_mat_spinner_15_Template, 1, 0, \"mat-spinner\", 7);\n        i0.ɵɵpipe(16, \"async\");\n        i0.ɵɵelementStart(17, \"span\");\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"button\", 8);\n        i0.ɵɵpipe(20, \"async\");\n        i0.ɵɵtext(21, \" Cancel \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.actionName, \" Program\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formControl\", ctx.programId);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", i0.ɵɵpipeBind1(14, 7, ctx.isProcessing$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(16, 9, ctx.isProcessing$));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.actionName);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", i0.ɵɵpipeBind1(20, 11, ctx.isProcessing$));\n    } }, directives: [i1.MatDialogTitle, i5.MatButton, i1.MatDialogClose, i6.MatIcon, i1.MatDialogContent, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i7.MatFormField, i7.MatLabel, i8.MatInput, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i1.MatDialogActions, i9.NgIf, i10.MatSpinner], pipes: [i9.AsyncPipe], encapsulation: 2 });\nCardsAssignUnassignProgramDialogComponent = __decorate([\n    UntilDestroy()\n], CardsAssignUnassignProgramDialogComponent);\nexport { CardsAssignUnassignProgramDialogComponent };\n"]},"metadata":{},"sourceType":"module"}